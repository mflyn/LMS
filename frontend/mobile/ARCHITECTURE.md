# Mobile应用多角色架构说明

## 架构概述

本项目采用统一的多角色应用架构，支持家长、学生、教师三种不同的用户角色，每种角色都有专门的界面和功能模块。

## 架构设计

### 1. 统一入口设计

- **主入口**: `App.js` - 应用的统一入口点
- **角色选择**: `RoleSelectionScreen.js` - 用户角色选择界面
- **认证管理**: `AuthContext.js` - 统一的认证状态管理

### 2. 多导航器架构

```
App.js (主入口)
├── RoleSelectionScreen (角色选择)
├── MainAppNavigator (教师端导航)
├── ParentAppNavigator (家长端导航)
└── StudentAppNavigator (学生端导航)
```

### 3. 角色管理系统

#### 用户角色定义
```javascript
export const USER_ROLES = {
  PARENT: 'parent',    // 家长
  STUDENT: 'student',  // 学生
  TEACHER: 'teacher',  // 教师
};
```

#### 角色切换流程
1. 用户登录后，如果没有角色信息，显示角色选择界面
2. 用户选择角色后，系统加载对应的导航器和界面
3. 用户可以随时在个人中心切换角色

## 核心功能

### 1. 统一认证系统
- 支持用户名密码登录
- 游客模式体验
- 角色信息持久化
- 自动登录状态恢复

### 2. 角色选择界面
- 直观的卡片式设计
- 每个角色有独特标识
- 清晰的功能说明
- 流畅的切换体验

### 3. 个人中心增强
- 当前角色显示
- 一键角色切换
- 完整的设置选项
- 现代化界面设计

## 技术实现

### 1. 状态管理
- 使用React Context进行全局状态管理
- AsyncStorage实现数据持久化
- 完整的认证生命周期管理

### 2. 导航架构
- 条件渲染不同的导航器
- 共享的导航服务
- 统一的页面跳转逻辑

### 3. 用户体验优化
- 加载状态指示
- 离线模式支持
- 错误处理机制
- 响应式设计

## 解决的问题

1. **消除了架构混乱** - 统一的入口点和清晰的层次结构
2. **实现了角色管理** - 完整的角色切换和状态管理
3. **减少了代码重复** - 共享的组件和服务
4. **改善了用户体验** - 现代化的界面和流畅的交互
5. **提高了可维护性** - 模块化的代码结构

## 后续优化方向

- 完善各角色专用功能
- 添加角色权限验证
- 优化性能和用户体验
- 扩展更多角色类型 